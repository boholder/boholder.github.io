<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# fb: http://ogp.me/ns/fb#"><meta name="theme-color" content="#fff" />
        <script>
            const theme = localStorage.getItem('theme');
            if (theme === "dark") {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000');
            } else if (theme === "light") {
                document.documentElement.setAttribute('data-theme', 'light');
                document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff');
            }
        </script>

    <meta charset="UTF-8" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes" />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    
    <meta name="renderer" content="webkit" />

    <meta name="generator" content="Hugo 0.58.1" />

    <title>HTTP cookieçš„å®‰å…¨æ€§ã€å®‰å…¨ä½¿ç”¨æ–¹æ³•å’Œæ”»å‡»é˜²å¾¡æ‰‹æ®µ | BoHolderçš„ç½‘ç«™:äº§å‡ºã€æƒ³æ³•ä¸å…¶ä»–</title>

    <link rel="stylesheet" href="/zh-cn/css/meme.min.css" data-instant-track /><style data-instant-track>html[data-theme='dark'] .post img {filter:invert(85%) hue-rotate(180deg)}.lang-toggle {display:none}.post p {text-align:justify;text-justify:distribute}</style>

    

    <meta name="author" content=" BoHolder" />
    
    
    <meta name="description" content="å·¥ä½œéœ€è¦ï¼Œè¦ä¸Šå°è®²è®²cookieå®‰å…¨æ€§ï¼Œç´¢æ€§æ€»ç»“æˆåšå®¢ï¼Œè‡ªè®¤ä¸ºè›®å…¨çš„" />
    <meta name="keywords" content="web-security, cookie, blog" />
    
    <link rel="shortcut icon" type="image/ico" href="/favicon.ico" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="BoHolderçš„ç½‘ç«™:äº§å‡ºã€æƒ³æ³•ä¸å…¶ä»–" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="BoHolderçš„ç½‘ç«™:äº§å‡ºã€æƒ³æ³•ä¸å…¶ä»–" />
    <meta name="msapplication-starturl" content="../../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://boholder.github.io/zh-cn/posts/cookie_security_zh/" />




<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2019-05-18T00:00:00+00:00",
        "dateModified": "2020-07-17T21:21:03+08:00",
        "url": "https://boholder.github.io/zh-cn/posts/cookie_security_zh/",
        "headline": "HTTP cookieçš„å®‰å…¨æ€§ã€å®‰å…¨ä½¿ç”¨æ–¹æ³•å’Œæ”»å‡»é˜²å¾¡æ‰‹æ®µ",
        "description": "å·¥ä½œéœ€è¦ï¼Œè¦ä¸Šå°è®²è®²cookieå®‰å…¨æ€§ï¼Œç´¢æ€§æ€»ç»“æˆåšå®¢ï¼Œè‡ªè®¤ä¸ºè›®å…¨çš„",
        "keywords": "web-security, cookie, blog",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  4879 ,
        "image": "https://boholder.github.io/icons/apple-touch-icon.png",
        "author": {
            "@type": "Person",
            "description": "info seeker, life game player.",
            "email": "bottleholder@anche.no",
            "image": "https://boholder.github.io/icons/apple-touch-icon.png",
            "url": "https://boholder.github.io/zh-cn/",
            "name": " BoHolder"
        },
        "license": "[CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/)",
        "publisher": {
            "@type": "Organization",
            "name": "BoHolderçš„ç½‘ç«™:äº§å‡ºã€æƒ³æ³•ä¸å…¶ä»–",
            "logo": {
                "@type": "ImageObject",
                "url": "https://boholder.github.io/icons/apple-touch-icon.png"
            },
            "url": "https://boholder.github.io/zh-cn/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://boholder.github.io/zh-cn/"
        }
    }
</script>

    



<meta name="twitter:card" content="summary" />


    






<meta property="og:title" content="HTTP cookieçš„å®‰å…¨æ€§ã€å®‰å…¨ä½¿ç”¨æ–¹æ³•å’Œæ”»å‡»é˜²å¾¡æ‰‹æ®µ" />
<meta property="og:description" content="å·¥ä½œéœ€è¦ï¼Œè¦ä¸Šå°è®²è®²cookieå®‰å…¨æ€§ï¼Œç´¢æ€§æ€»ç»“æˆåšå®¢ï¼Œè‡ªè®¤ä¸ºè›®å…¨çš„" />
<meta property="og:url" content="https://boholder.github.io/zh-cn/posts/cookie_security_zh/" />
<meta property="og:site_name" content="BoHolderçš„ç½‘ç«™:äº§å‡ºã€æƒ³æ³•ä¸å…¶ä»–" />
<meta property="og:locale" content="zh-CN" />
            <meta property="og:locale:alternate" content="en-us" />
        
            <meta property="og:locale:alternate" content="en-US" />
        <meta property="og:image" content="https://boholder.github.io/icons/apple-touch-icon.png" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2019-05-18T00:00:00+00:00" />
    <meta property="article:modified_time" content="2020-07-17T21:21:03+08:00" />
    
    
    <meta property="article:section" content="posts" />
    <meta property="article:tag" content="web-security, cookie, blog" />

</head>

    <body>
        <div class="container">
            
    <header class="header">
        <div class="site-brand">
            
            <a href="/zh-cn/" class="brand">BoHolderçš„ç½‘ç«™:äº§å‡ºã€æƒ³æ³•ä¸å…¶ä»–</a>
            
        </div>
    </header>

            
    <nav class="nav">
        <ul class="menu" id="menu">
            
            
                <li class="menu-item active"><a href="/zh-cn/posts/"><svg class="icon menu-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 9.8 11.2 15.5 19.1 9.7L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64z"></path></svg><span class="menu-item-name">åšå®¢</span></a>
                </li>
            
                <li class="menu-item"><a href="/zh-cn/arts/"><svg class="icon menu-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M48 0C21.53 0 0 21.53 0 48v64c0 8.84 7.16 16 16 16h80V48C96 21.53 74.47 0 48 0zm208 412.57V352h288V96c0-52.94-43.06-96-96-96H111.59C121.74 13.41 128 29.92 128 48v368c0 38.87 34.65 69.65 74.75 63.12C234.22 474 256 444.46 256 412.57zM288 384v32c0 52.93-43.06 96-96 96h336c61.86 0 112-50.14 112-112 0-8.84-7.16-16-16-16H288z"></path></svg><span class="menu-item-name">å›¾æ–‡</span></a>
                </li>
            
                <li class="menu-item"><a href="/zh-cn/code/"><svg class="icon menu-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path></svg><span class="menu-item-name">ç¼–ç¨‹</span></a>
                </li>
            
                <li class="menu-item"><a href="/zh-cn/categories/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon menu-item-icon"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg><span class="menu-item-name">åˆ†ç±»</span></a>
                </li>
            
                <li class="menu-item"><a href="/zh-cn/tags/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon menu-item-icon"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg><span class="menu-item-name">æ ‡ç­¾</span></a>
                </li>
            
                <li class="menu-item"><a href="/zh-cn/archive/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon menu-item-icon"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class="menu-item-name">å½’æ¡£</span></a>
                </li>
            
                <li class="menu-item"><a href="/zh-cn/about/"><svg class="icon menu-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"></path></svg><span class="menu-item-name">å…³äº</span></a>
                </li>
            
        </ul>
    </nav>

            
    <div class="lang-toggle" onmouseover="langSwitcherOver()" onmouseout="langSwitcherOut()">ä¸­æ–‡
        
            
        
    </div>

            
    
        
            
        
        
        <div id="theme-toggle" onclick="modeSwitcher()">ğŸŒ</div>
    

            
    <main class="main single" id="main">
    <div class="main-inner">
        <article class="content post">
            
            <h1 class="post-title">HTTP cookieçš„å®‰å…¨æ€§ã€å®‰å…¨ä½¿ç”¨æ–¹æ³•å’Œæ”»å‡»é˜²å¾¡æ‰‹æ®µ</h1>

            

            
                
                    <div class="post-description">å·¥ä½œéœ€è¦ï¼Œè¦ä¸Šå°è®²è®²cookieå®‰å…¨æ€§ï¼Œç´¢æ€§æ€»ç»“æˆåšå®¢ï¼Œè‡ªè®¤ä¸ºè›®å…¨çš„</div>
                
            

            
                <div class="post-meta">
    
        
        <time datetime="2019-05-18T00:00:00+00:00" class="post-meta-item published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>May 18, 2019</time>
    
    
        
        <time datetime="2020-07-17T21:21:03+08:00" class="post-meta-item modified"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>July 17, 2020</time>
    
    
    
        
        
        
            
                
                <span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg><a href="/zh-cn/categories/web-security/" class="category-link">web-security</a></span>
            
        
    
    
        
        <span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>4879</span>
    
    
        
        <span class="post-meta-item readingtime"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>10&nbsp;åˆ†é’Ÿ</span>
    
</div>
            

            


                <nav class="contents">
<h2 id="contents" class="contents-title">ç›®å½•</h2><ol class="toc">
<li><a id="contents:å‰è¨€" href="#å‰è¨€">å‰è¨€</a></li>
<li><a id="contents:ç›®å½•" href="#ç›®å½•">ç›®å½•</a></li>
<li><a id="contents:what-is-cookie" href="#what-is-cookie">What is cookie</a>
<ol>
<li><a id="contents:å®šä¹‰" href="#å®šä¹‰">å®šä¹‰</a></li>
<li><a id="contents:æ ¼å¼-ç”¨æ³•" href="#æ ¼å¼-ç”¨æ³•">æ ¼å¼&amp;ç”¨æ³•</a></li>
</ol></li>
<li><a id="contents:security-risk-in-design-and-use-and-solution" href="#security-risk-in-design-and-use-and-solution">Security risk in design and use and solution</a>
<ol>
<li><a id="contents:1-æœåŠ¡å™¨åªèƒ½è¯»å–cookieé”®å€¼å¯¹-è¯»ä¸åˆ°å±æ€§" href="#1-æœåŠ¡å™¨åªèƒ½è¯»å–cookieé”®å€¼å¯¹-è¯»ä¸åˆ°å±æ€§">1.æœåŠ¡å™¨åªèƒ½è¯»å–cookieé”®å€¼å¯¹ï¼Œè¯»ä¸åˆ°å±æ€§</a>
<ol>
<li><a id="contents:è§£å†³-æœåŠ¡å™¨å®¹é”™ä¸é”®å-èµ°ç§-smuggle" href="#è§£å†³-æœåŠ¡å™¨å®¹é”™ä¸é”®å-èµ°ç§-smuggle">è§£å†³ï¼šæœåŠ¡å™¨å®¹é”™ä¸é”®åâ€œèµ°ç§ï¼ˆSmuggleï¼‰â€</a></li>
</ol></li>
<li><a id="contents:2-domain-path-å±æ€§å½±å“å®Œæ•´æ€§" href="#2-domain-path-å±æ€§å½±å“å®Œæ•´æ€§">2. â€œDomainâ€â€œPathâ€å±æ€§å½±å“å®Œæ•´æ€§</a>
<ol>
<li><a id="contents:path-æ˜¯æŒ‡åŸŸå-hostä¸‹çš„è·¯å¾„å½’å±" href="#path-æ˜¯æŒ‡åŸŸå-hostä¸‹çš„è·¯å¾„å½’å±"><code>Path</code> æ˜¯æŒ‡åŸŸå|Hostä¸‹çš„è·¯å¾„å½’å±ã€‚</a></li>
<li><a id="contents:domain-æ˜¯æŒ‡åŸŸåå½’å±" href="#domain-æ˜¯æŒ‡åŸŸåå½’å±"><code>Domain</code> æ˜¯æŒ‡åŸŸåå½’å±ã€‚</a></li>
<li><a id="contents:è§£å†³-samesite-å±æ€§-2016å¹´-ä¸è®¾ç½®-domain-å±æ€§" href="#è§£å†³-samesite-å±æ€§-2016å¹´-ä¸è®¾ç½®-domain-å±æ€§">è§£å†³ï¼š<code>SameSite</code> å±æ€§(2016å¹´)&amp;ä¸è®¾ç½®<code>Domain</code>å±æ€§</a>
<ol>
<li><a id="contents:samesite" href="#samesite"><code>SameSite</code></a></li>
<li><a id="contents:ä¸è®¾ç½®-domain-å±æ€§" href="#ä¸è®¾ç½®-domain-å±æ€§">ä¸è®¾ç½®<code>Domain</code>å±æ€§</a></li>
</ol></li>
</ol></li>
<li><a id="contents:3-å¯¹cookieçš„è¯¯ç”¨" href="#3-å¯¹cookieçš„è¯¯ç”¨">3.å¯¹cookieçš„è¯¯ç”¨</a>
<ol>
<li><a id="contents:â‘ http-æ˜æ–‡ä¼ é€’-cookie" href="#â‘ http-æ˜æ–‡ä¼ é€’-cookie">â‘ http æ˜æ–‡ä¼ é€’ cookie</a></li>
<li><a id="contents:â‘¡cookie-é»˜è®¤å¯è¢«å®¢æˆ·ç«¯api-js-etc-è¯»å–" href="#â‘¡cookie-é»˜è®¤å¯è¢«å®¢æˆ·ç«¯api-js-etc-è¯»å–">â‘¡cookie é»˜è®¤å¯è¢«å®¢æˆ·ç«¯API(JS etc)è¯»å–</a></li>
<li><a id="contents:â‘¢é”™è¯¯è§„åˆ’-max-age-expires" href="#â‘¢é”™è¯¯è§„åˆ’-max-age-expires">â‘¢é”™è¯¯è§„åˆ’<code>max-age</code>ã€<code>expires</code></a></li>
<li><a id="contents:è§£å†³-è°¨æ…è®¾è®¡-max-age-expires-çš„å€¼" href="#è§£å†³-è°¨æ…è®¾è®¡-max-age-expires-çš„å€¼">è§£å†³ï¼šè°¨æ…è®¾è®¡<code>max-age</code>ã€<code>expires</code>çš„å€¼</a></li>
</ol></li>
</ol></li>
<li><a id="contents:attack-on-cookies-and-solution" href="#attack-on-cookies-and-solution">Attack on cookies and solution</a>
<ol>
<li><a id="contents:ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ”»å‡»-ä¿æŠ¤cookie" href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ”»å‡»-ä¿æŠ¤cookie">ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ”»å‡»|ä¿æŠ¤cookieï¼Ÿ</a></li>
<li><a id="contents:å¸¸è§æ”»å‡»æ–¹å¼" href="#å¸¸è§æ”»å‡»æ–¹å¼">å¸¸è§æ”»å‡»æ–¹å¼</a></li>
<li><a id="contents:éå¸¸è§æ–¹å¼" href="#éå¸¸è§æ–¹å¼">éå¸¸è§æ–¹å¼</a>
<ol>
<li><a id="contents:â‘ cookiejacking-rosario-valotta-2011-05-link-https-sites-google-com-site-tentacoloviola-cookiejacking" href="#â‘ cookiejacking-rosario-valotta-2011-05-link-https-sites-google-com-site-tentacoloviola-cookiejacking">â‘ cookiejacking-Rosario Valotta-2011-05<a href="https://sites.google.com/site/tentacoloviola/cookiejacking" target="_blank">[link]</a></a></li>
</ol></li>
</ol></li>
<li><a id="contents:academic-discussion-about-cookies" href="#academic-discussion-about-cookies">Academic discussion about cookies</a>
<ol>
<li><a id="contents:cookie-masking-cookie-æ©ç›–" href="#cookie-masking-cookie-æ©ç›–">cookie masking-cookie æ©ç›–</a></li>
<li><a id="contents:æµ‹ä¿¡é“æ”»å‡»" href="#æµ‹ä¿¡é“æ”»å‡»">æµ‹ä¿¡é“æ”»å‡»</a></li>
</ol></li>
<li><a id="contents:summary" href="#summary">Summary</a></li>
</ol>
</nav><div class="post-body">

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:å‰è¨€" class="headings">å‰è¨€</a></h2>

<p style="text-indent:0"><span class="drop-cap">æœ¬</span>æ–‡å°†æŠŠï¼Œæˆªè‡³2019-05-18çš„ï¼Œä»äº’è”ç½‘ä¸Šæœé›†åˆ°</p>

<p>ï¼ˆ&quot;cookie+security&quot;-&gt;Googleä¸StartPageå‰ä¸¤é¡µç»“æœä¸ºæº+ç›¸å…³å­¦æœ¯æ–‡çŒ®ï¼‰çš„,<br />
æœ‰å…³Cookieæ ‡å‡†ä¸ç”¨æ³•ã€cookieå®‰å…¨æ€§çš„ä¿¡æ¯ï¼Œæ±‡æ€»ç´¢å¼•ï¼Œä»¥æ–¹ä¾¿è¯»è€…å­¦ä¹ äº†è§£ç›¸å…³ä¿¡æ¯ã€‚</p>

<p>æœ¬æ–‡éœ€è¦è¯»è€…å¯¹è®¡ç®—æœºç½‘ç»œæœ‰å¤§è‡´äº†è§£ï¼Œ<br />
æ²¡æœ‰äº†è§£ä¹Ÿå¯ä»¥ï¼Œæœ¯è¯­ä¼šæŒ‚ä¸Šè§£é‡Šé“¾æ¥ï¼Œä½†é˜…è¯»ä½“éªŒå°±æ¯”è¾ƒå·®äº†ã€‚</p>

<p>å°æ®µè‹±æ–‡çš„ç¿»è¯‘äº¤ç»™è°·æ­Œå¤„ç†ã€‚</p>

<h2 id="ç›®å½•"><a href="#ç›®å½•" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:ç›®å½•" class="headings">ç›®å½•</a></h2>

<p>2éƒ¨åˆ†ä¸3éƒ¨åˆ†çš„è§£å†³æ–¹æ¡ˆéƒ¨åˆ†æœ‰é‡å¤ï¼Œ<br />
ä½†æˆ‘è®¤ä¸ºè¿˜æ˜¯æŠŠæ”»é˜²å’Œå¼€å‘åˆ†å¼€ï¼Œç¼ºé™·ä¸è§£å†³ç»“åˆï¼Œæ¯”è¾ƒæ–¹ä¾¿é˜…è¯»ã€‚</p>

<ol>
<li><a href="#what-is-cookie">Cookieæ˜¯ä»€ä¹ˆ&amp;ç”¨æ³•</a></li>
<li><a href="#security-risk-in-design-and-use-and-solution">è®¾è®¡ã€ä½¿ç”¨ä¸­çš„å®‰å…¨éšæ‚£ä»¥åŠç›¸åº”æ”¹è¿›</a></li>
<li><a href="#attack-on-cookies-and-solution">é’ˆå¯¹cookieçªƒå–çš„æ”»å‡»ä¸ç›¸åº”é˜²å¾¡</a></li>
<li><a href="#academic-discussion-about-cookies">å­¦æœ¯è®¨è®ºæ¶‰åŠcookieçš„æ”»é˜²</a></li>
<li><a href="#summary">æ€»ç»“</a></li>
</ol>

<h2 id="what-is-cookie"><a href="#what-is-cookie" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:what-is-cookie" class="headings">What is cookie</a></h2>

<p><strong>1.Cookieæ˜¯ä»€ä¹ˆ&amp;ç”¨æ³•</strong></p>

<h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:å®šä¹‰" class="headings">å®šä¹‰</a></h3>

<p>è‹±æ–‡<a href="https://en.wikipedia.org/wiki/HTTP_cookie" target="_blank">ç»´åŸºç™¾ç§‘</a> è¿˜æ˜¯è›®ä¸°å¯Œçš„ï¼Œä¸­æ–‡ç»´åŸºç®€å•ç‚¹ï¼Œå¯ä»¥çœ‹<a href="https://baike.baidu.com/item/cookie/1119" target="_blank">ç™¾åº¦ç™¾ç§‘</a>ã€‚</p>

<p>RFCï¼š<a href="https://tools.ietf.org/html/rfc2109" target="_blank">rfc2109-1997</a> -&gt; <a href="https://tools.ietf.org/html/rfc2965" target="_blank">rfc2965-2000</a> -&gt; <a href="https://tools.ietf.org/html/rfc6265" target="_blank">rfc6265-2011</a> -&gt; <a href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-rfc6265bis/" target="_blank">rfc6265bis</a></p>

<p><a href="https://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html" target="_blank">https://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html</a></p>

<p>åœ¨æœ€æ–°çš„å®šä¹‰cookieçš„RFC2965ä¸Šï¼Œæ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p>

<blockquote>
<p>we will use the term cookie to refer to the state<br />
   information that passes between an origin server and user agent,<br />
   and that gets stored by the user agent.</p>

<p>æˆ‘ä»¬å°†ä½¿ç”¨æœ¯è¯­cookieæ¥æŒ‡ä»£åœ¨æºæœåŠ¡å™¨å’Œç”¨æˆ·ä»£ç†ä¹‹é—´ä¼ é€’çš„çŠ¶æ€ä¿¡æ¯ï¼Œ<br />
ä»¥åŠç”±ç”¨æˆ·ä»£ç†å­˜å‚¨çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
</blockquote>

<p>ç®€å•æ€»ç»“ï¼Œcookieæ˜¯ï¼šæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯é—´æ ‡è¯†çŠ¶æ€çš„ä¿¡æ¯ï¼Œå‚¨å­˜åœ¨å®¢æˆ·ç«¯<br />
ï¼ˆç¡¬ç›˜æˆ–å†…å­˜ï¼Œè§†ç±»å‹è€Œå®šï¼‰ï¼Œç”±æœåŠ¡å™¨å¢åˆ æ”¹è¯»ã€‚<br />
ç”¨é€”ï¼šæ»¡è¶³å¯¹æ— çŠ¶æ€çš„HTTPåè®®ï¼Œæƒ³è®©å®ƒ<strong>æœ‰çŠ¶æ€</strong>çš„éœ€æ±‚ï¼Œä¸€ç§ä¿®è¡¥æªæ–½ã€‚</p>

<p>æ¯”å¦‚ä¸€ä¸ªæœåŠ¡å™¨ï¼Œéœ€è¦åŒæ—¶ä¸å¤šä¸ªå®¢æˆ·ç«¯é€šä¿¡ã€‚</p>

<ul>
<li>å› ä¸ºHTTPåè®®@çš„æ— è¿æ¥æ€§ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªé¢å¤–æ–¹æ³•åŒºåˆ†ä¸åŒå®¢æˆ·ç«¯ã€‚</li>
<li>ç„¶åå› ä¸ºè®¡ç®—æœºç½‘ç»œçš„ç½‘ç»œå±‚è·¯ç”±æœ‰<a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing" target="_blank">CIDR-æ— ç±»åŸŸé—´è·¯ç”±</a>ã€<a href="https://en.wikipedia.org/wiki/Network_address_translation" target="_blank">NAT-ç½‘ç»œåœ°å€è½¬æ¢</a> è¿™ç±»åè®®å­˜åœ¨ï¼Œ<br />
æœåŠ¡å™¨ä¸èƒ½å•é è®°å½•IPæˆ–è€…MACè¿™äº›HTTPåŒ…é‡Œçš„ä¿¡æ¯æ ‡è¯†æ¯ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚</li>
</ul>

<p>å› æ­¤Netscape Draftåœ¨1994å¹´ç‡å…ˆå®šä¹‰äº†cookieè¿™ä¸€è§£å†³æ–¹æ¡ˆ<br />
ï¼ˆæ­¤å¤„apache.orgçš„åŸæ–‡é“¾æ¥å¥½åƒå¤±æ•ˆäº†ï¼‰ï¼Œä¹‹åè¢«æ•´ç†æˆrfc2109ã€‚</p>

<p>cookieå¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿ<a href="https://en.wikipedia.org/wiki/HTTP_cookie#Uses" target="_blank">ç»´åŸº</a> ç»™äº†ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>

<ol>
<li>ä¼šè¯ç®¡ç†</li>
<li>ä¸ªæ€§åŒ–å®šåˆ¶ <a href="https://en.wikipedia.org/wiki/Zombie_cookie" target="_blank">wikipedia-Zombie cookie ï¼ˆæœ‰ç‚¹æ„æ€ï¼‰</a></li>
<li>è¿½è¸ª</li>
</ol>

<h3 id="æ ¼å¼-ç”¨æ³•"><a href="#æ ¼å¼-ç”¨æ³•" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:æ ¼å¼-ç”¨æ³•" class="headings">æ ¼å¼&amp;ç”¨æ³•</a></h3>

<p>ä¸€ä¸ªcookieç”±ä¸€ä¸ªé”®å€¼å¯¹ï¼ˆkey=valueï¼‰ç»„æˆï¼ŒåŒæ—¶åœ¨<em>è¢«è®¾ç½®æ—¶</em> ä¼šé™„åŠ ä¸€äº›å˜é‡ï¼ˆattributesï¼‰ï¼Œ<br />
è¿™äº›å˜é‡ç”¨æ¥æ§åˆ¶è¯¥cookieçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>

<p>æƒ³äº†è§£è¯¦ç»†å±æ€§ï¼Œçœ‹<a href="https://tools.ietf.org/html/rfc6265#section-5.2" target="_blank">rfc6265-The Set-Cookie Header</a> ï¼Œ<br />
æ‰¾ä¸åˆ°æ–°é²œçš„å…¨é¢çš„ä¸­æ–‡ææ–™ï¼Œæœ‰ä¸ªä¸é”™çš„<a href="https://imququ.com/post/host-only-cookie.html#toc-3" target="_blank">åšå®¢@Jerry Qu</a> ï¼Œä½†æ˜¯æ˜¯13å¹´çš„ã€‚</p>

<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æ—¶å¸¸å¬é—»çš„ç¬¬ä¸‰æ–¹cookieï¼Œåœ¨è®¾ç½®æ—¶ä¼šæ ‡ä¸€ä¸ª<code>Third-party</code>å±æ€§ï¼Œ<br />
è¡¨æ˜è¿™æ˜¯ä»éå½“å‰ç½‘ç«™ï¼ˆURLæ¡†é‡Œçš„ç½‘ç«™ï¼‰è®¾ç½®çš„ã€‚</p>

<p>å½“ä¸€ä¸ªç½‘ç«™æœ‰å¼•ç”¨ï¼ˆ&lt;img&gt;...ï¼‰å…¶ä»–ç½‘ç«™ï¼Œæ¯”å¦‚å¹¿å‘Šç½‘ç«™çš„å¹¿å‘Šèµ„æºæ—¶ï¼Œ<br />
æµè§ˆå™¨åŠ è½½è¯¥ç½‘ç«™æ—¶ï¼Œä¹Ÿä¼šå‘å¹¿å‘Šç½‘ç«™å‘GETè¯·æ±‚ï¼Œ<br />
ç¬¬ä¸‰æ–¹cookieå°±éšç€èµ„æºä¸€èµ·æ¥åˆ°äº†æµè§ˆå™¨ä¸Šã€‚</p>

<p>å¯¹cookieçš„æ“ä½œä¸å†èµ˜è¿°ï¼Œæœ‰éœ€è¯·è‡ªå–ã€‚</p>

<p><a href="https://en.wikipedia.org/wiki/HTTP_cookie#Implementation" target="_blank">https://en.wikipedia.org/wiki/HTTP_cookie#Implementation</a></p>

<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank">https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie</a></p>

<p><a href="https://tools.ietf.org/html/rfc6265#section-4.2" target="_blank">https://tools.ietf.org/html/rfc6265#section-4.2</a></p>

<h2 id="security-risk-in-design-and-use-and-solution"><a href="#security-risk-in-design-and-use-and-solution" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:security-risk-in-design-and-use-and-solution" class="headings">Security risk in design and use and solution</a></h2>

<p><strong>2.Cookieè®¾è®¡ä¸ä½¿ç”¨ä¸­çš„å®‰å…¨éšæ‚£ï¼Œä»¥åŠç›¸åº”æ”¹è¿›</strong></p>

<p>Cookieå®‰å…¨æ€§è¿™ç‚¹ï¼Œ<a href="https://tools.ietf.org/html/rfc6265#section-8" target="_blank">rfc6265ä¸­æœ‰ä¸€æ•´æ®µ(8. Security Considerations)</a> å»é˜è¿°ï¼Œ<br />
åŠ¡å¿…è¯»ä¸€ä¸‹ï¼Œæ€»ç»“çš„å¾ˆå¥½ï¼Œæˆ‘ä¼šè·³è¿‡é‚£äº›å†…å®¹ï¼Œåªç»™å‡ºä¸€ä¸ªç›®å½•ä»¥ä¾›é¢„è§ˆã€‚</p>

<table>
<thead>
<tr>
<th>åˆ†æ ‡é¢˜</th>
<th>ç®€è¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td>Overview</td>
<td>æ€»è§ˆ</td>
</tr>

<tr>
<td>Ambient Authority</td>
<td>cookieæ˜¯ä¸€ç§æƒé™å‡­è¯</td>
</tr>

<tr>
<td>Clear Text</td>
<td>æ˜æ–‡ä¼ è¾“é—®é¢˜</td>
</tr>

<tr>
<td>Session Identifiers</td>
<td>éå¯è¯»çš„ä¼šè¯æ ‡è¯†ç¬¦</td>
</tr>

<tr>
<td>Weak Confidentiality</td>
<td>cookieåœ¨å„ç§å±‚é¢ä¿å¯†æ€§éƒ½å¼±</td>
</tr>

<tr>
<td>Reliance on DNS</td>
<td>cookieçš„å®‰å…¨æ€§ä»¥DNSå®‰å…¨ä¸ºå‰æ</td>
</tr>
</tbody>
</table>

<p>ä¸å…¶è¯´å…¶è®¾è®¡ä¸å‘¨å…¨ï¼Œä¸å¦‚è¯´cookieå› æœ¬èº«ä½ç½®çš„é™åˆ¶æ— æ³•ä¿è¯è®¾è®¡å®‰å…¨ï¼Œ<br />
rfcè¿˜è­¦å‘Šå¼€å‘äººå‘˜ä¸è¦æŠŠcookieä½œä¸ºå”¯ä¸€çš„è®¤è¯ç¯èŠ‚ã€‚</p>

<blockquote>
<p>rfc6265: In addition, by default, cookies do not provide confidentiality or integrity<br />
from network attackers, even when used in conjunction with HTTPS.</p>

<p>æ­¤å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œcookieä¸ä¼šä¸ºç½‘ç»œæ”»å‡»è€…æä¾›æœºå¯†æ€§æˆ–å®Œæ•´æ€§ï¼Œ<br />
å³ä½¿ä¸HTTPSç»“åˆä½¿ç”¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
</blockquote>

<h3 id="1-æœåŠ¡å™¨åªèƒ½è¯»å–cookieé”®å€¼å¯¹-è¯»ä¸åˆ°å±æ€§"><a href="#1-æœåŠ¡å™¨åªèƒ½è¯»å–cookieé”®å€¼å¯¹-è¯»ä¸åˆ°å±æ€§" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:1-æœåŠ¡å™¨åªèƒ½è¯»å–cookieé”®å€¼å¯¹-è¯»ä¸åˆ°å±æ€§" class="headings">1.æœåŠ¡å™¨åªèƒ½è¯»å–cookieé”®å€¼å¯¹ï¼Œè¯»ä¸åˆ°å±æ€§</a></h3>

<blockquote>
<p><a href="https://tools.ietf.org/html/rfc6265#section-4.2.2" target="_blank">rfc6265#section-4.2.2</a> :<br />
   Notice that the cookie attributes are not returned.<br />
   In particular,the server cannot determine from the Cookie header alone<br />
   when a cookie will expire, for which hosts the cookie is valid,<br />
   for which paths the cookie is valid,
   or whether the cookie was set with the Secure or HttpOnly attributes.</p>

<p><a href="https://tools.ietf.org/html/rfc6265#section-4.2.2" target="_blank">rfc6265#section-4.2.2</a> :<br />
è¯·æ³¨æ„ï¼Œä¸è¿”å›cookieå±æ€§ã€‚ç‰¹åˆ«æ˜¯ï¼Œå½“cookieè¿‡æœŸæ—¶ï¼Œ<br />
æœåŠ¡å™¨æ— æ³•å•ç‹¬ä»Cookieæ ‡å¤´ç¡®å®šï¼Œcookieå¯¹å“ªäº›ä¸»æœºæœ‰æ•ˆï¼Œcookieçš„è·¯å¾„æœ‰æ•ˆï¼Œ<br />
æˆ–è€…cookieæ˜¯å¦ä½¿ç”¨Secureæˆ–HttpOnlyå±æ€§è®¾ç½®ã€‚</p>
</blockquote>

<p>åŒæ—¶åœ¨è®¾ç½®cookieæ—¶ï¼Œå®¢æˆ·ç«¯å¹¶ä¸ä¼šå‘å›ç»“æœåé¦ˆã€‚è¿™ä½¿å¾—æœåŠ¡å™¨ä¸çŸ¥é“cookieæ˜¯å¦è¢«æ­£ç¡®è®¾ç½®ã€‚<br />
è¿™ç­‰äºè¦ä»æ•°æ®åº“è¯»ä¸€ä¸ªä¸çŸ¥é“æ˜¯å¦å¹²å‡€çš„æ•°æ®ï¼Œå¯¹æ•°æ®å®Œæ•´æ€§æœ‰å½±å“ã€‚</p>

<h4 id="è§£å†³-æœåŠ¡å™¨å®¹é”™ä¸é”®å-èµ°ç§-smuggle"><a href="#è§£å†³-æœåŠ¡å™¨å®¹é”™ä¸é”®å-èµ°ç§-smuggle" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:è§£å†³-æœåŠ¡å™¨å®¹é”™ä¸é”®å-èµ°ç§-smuggle" class="headings">è§£å†³ï¼šæœåŠ¡å™¨å®¹é”™ä¸é”®åâ€œèµ°ç§ï¼ˆSmuggleï¼‰â€</a></h4>

<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨æœåŠ¡å™¨é€»è¾‘å®¹é”™ã€‚<br />
<a href="https://www.owasp.org/images/a/a0/OWASPLondon20171130_Cookie_Security_Myths_Misconceptions_David_Johansson.pdf" target="_blank">OWASPLondon20171130_Cookie_Security_Myths_Misconceptions_David_Johansson</a><br />
æ­¤æŠ¥å‘Šæä¾›äº†åœ¨cookieåé‡Œæ·»åŠ â€œç§è´§â€ä»¥æ ‡è¯†å±æ€§çš„æ–¹æ³•ï¼Œ<br />
æ¯”å¦‚ä¸€ä¸ªcookieè®¾ç½®äº†å±æ€§<code>http-only</code>ï¼Œåå­—å°±åŠ ä¸ªå‰ç¼€HTTP_ONLY_ã€‚</p>

<h3 id="2-domain-path-å±æ€§å½±å“å®Œæ•´æ€§"><a href="#2-domain-path-å±æ€§å½±å“å®Œæ•´æ€§" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:2-domain-path-å±æ€§å½±å“å®Œæ•´æ€§" class="headings">2. â€œDomainâ€â€œPathâ€å±æ€§å½±å“å®Œæ•´æ€§</a></h3>

<p><a href="https://tools.ietf.org/html/rfc6265#section-5.2.3" target="_blank">rfc6265-ä¸¤ä¸ªå±æ€§çš„è®¾ç½®</a></p>

<p><a href="https://tools.ietf.org/html/rfc6265#section-5.1.2" target="_blank">rfc6265-ä¸¤ä¸ªå±æ€§åœ¨å®¢æˆ·ç«¯çš„å¤„ç†ç®—æ³•</a></p>

<p>ä¸è´´åŸæ–‡äº†ï¼Œç®€å•åœ°æ€»ç»“ï¼ˆå‚ç…§ç»´åŸºï¼‰ï¼š</p>

<h4 id="path-æ˜¯æŒ‡åŸŸå-hostä¸‹çš„è·¯å¾„å½’å±"><a href="#path-æ˜¯æŒ‡åŸŸå-hostä¸‹çš„è·¯å¾„å½’å±" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:path-æ˜¯æŒ‡åŸŸå-hostä¸‹çš„è·¯å¾„å½’å±" class="headings"><code>Path</code> æ˜¯æŒ‡åŸŸå|Hostä¸‹çš„è·¯å¾„å½’å±ã€‚</a></h4>

<ul>
<li>æ¯”å¦‚ä¸¤ç½‘ç«™<code>example.com/site1/index.htm</code>,<code>example/com/site2/index.htm</code>ï¼Œ<br />
è®¾ç½®Pathå±æ€§ä¸º<code>/site1</code>,<code>/site2</code>ä¸¤ä¸ªå€¼ä»¥åˆ†ç¦»ä¸¤ä¸ªç›®å½•ä¸­çš„é¡µé¢çš„cookieã€‚</li>
<li>æœ‰äº›ç½‘ç«™çš„ä¸åŒç›®å½•æ˜¯è¿è¡Œä¸åŒåŠŸèƒ½çš„ï¼Œæ¯”å¦‚ä¸¤ä¸ªæœ‹å‹å…±ç§Ÿä¸€ä¸ªåŸŸåè¿è¥åšå®¢ï¼Œç”¨ä¸Šè¿°æ–¹å¼åˆ’åˆ†ã€‚<br />
é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥åšåˆ°åˆ†ç¦»ä¸¤ä¸ªåšå®¢çš„cookieã€‚
<br /></li>
</ul>

<p>çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†ç¨æœ‰ä¸æ…ï¼ˆæˆ–æ•…æ„ä¸ºä¹‹ï¼‰ï¼Œå°±å¯ä»¥ç”¨æ¥ç»•è¿‡<a href="https://en.wikipedia.org/wiki/Same-origin_policy" target="_blank">SOE-åŒæºç­–ç•¥</a> ã€‚<br />
æ¯”å¦‚ï¼Œè®¾ç½®pathæˆ<code>/</code>ï¼Œå¥½ï¼ŒåŸŸåä¸‹æ‰€æœ‰é¡µé¢éƒ½èƒ½è¯»è¯¥cookieäº†ã€‚</p>

<p>è¿™æ˜¯ä¸€ç§å‡å°‘ç½‘ç«™å¼€å‘äººå‘˜å·¥ä½œé‡çš„çªé—¨ï¼Œä¹Ÿèƒ½è¢«æ”»å‡»è€…ç”¨æ¥åšçªƒå–cookieçš„æ‰‹æ®µã€‚</p>

<h4 id="domain-æ˜¯æŒ‡åŸŸåå½’å±"><a href="#domain-æ˜¯æŒ‡åŸŸåå½’å±" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:domain-æ˜¯æŒ‡åŸŸåå½’å±" class="headings"><code>Domain</code> æ˜¯æŒ‡åŸŸåå½’å±ã€‚</a></h4>

<p>å®ƒå’Œ<code>Path</code>å±æ€§çš„ç¼ºç‚¹å·®ä¸å¤šç±»å‹ï¼Œè®¾ç½®äº†<code>Domain</code>çš„cookieæ˜¯<strong>é»˜è®¤æš´éœ²ç»™æ‰€æœ‰å­åŸŸå</strong>çš„ã€‚<br />
æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒåŒåŸŸåä¸ä¸€å®šç­‰äºåŒæœåŠ¡å™¨IPï¼Œæ‰€ä»¥æ”»å‡»è€…å¯ä»¥åŠ«æŒåŸŸåè§£æå·cookieã€‚<br />
å› ä¸ºè¿™ä¸ªåŸå› ï¼Œå®é™…å¼€å‘ä¸­ä¸€èˆ¬ä¸å»ºè®®è®¾ç½®<code>Domain</code>å±æ€§ã€‚</p>

<h4 id="è§£å†³-samesite-å±æ€§-2016å¹´-ä¸è®¾ç½®-domain-å±æ€§"><a href="#è§£å†³-samesite-å±æ€§-2016å¹´-ä¸è®¾ç½®-domain-å±æ€§" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:è§£å†³-samesite-å±æ€§-2016å¹´-ä¸è®¾ç½®-domain-å±æ€§" class="headings">è§£å†³ï¼š<code>SameSite</code> å±æ€§(2016å¹´)&amp;ä¸è®¾ç½®<code>Domain</code>å±æ€§</a></h4>

<h5 id="samesite"><a href="#samesite" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:samesite" class="headings"><code>SameSite</code></a></h5>

<blockquote>
<p><a href="https://en.wikipedia.org/wiki/HTTP_cookie#Same-site_cookie" target="_blank">ç»´åŸº#Same-site_cookie</a>:<br />
    In 2016 Google Chrome version 51 introduced a new kind of cookie, the same-site cookie,<br />
    which can only be sent in requests originating from the same origin as the target domain.<br />
    This restriction mitigates attacks such as cross-site request forgery (XSRF).<br />
     A cookie is given this characteristic by setting the SameSite flag to Strict or Lax.<br />
     <a href="https://tools.ietf.org/html/draft-west-first-party-cookies-07" target="_blank">googleï¼šdraft-ietf-httpbis-cookie-same-site </a></p>

<p>2016å¹´ï¼Œè°·æ­ŒChromeç‰ˆæœ¬51å¼•å…¥äº†ä¸€ç§æ–°å‹cookieï¼Œå³åŒä¸€ç«™ç‚¹çš„cookieï¼Œ<br />
åªèƒ½åœ¨æºè‡ªä¸ç›®æ ‡åŸŸç›¸åŒçš„æºçš„è¯·æ±‚ä¸­å‘é€ã€‚æ­¤é™åˆ¶å¯ç¼“è§£è¯¸å¦‚è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ï¼ˆXSRFï¼‰ç­‰æ”»å‡»ã€‚<br />
é€šè¿‡å°†SameSiteæ ‡å¿—è®¾ç½®ä¸ºStrictæˆ–Laxï¼Œå¯ä»¥ä¸ºcookieæä¾›æ­¤ç‰¹æ€§ã€‚</p>
</blockquote>

<p>æ ‡å‡†æ”¯æŒï¼šæˆªè‡³æ’°æ–‡æ—¶é—´(2019-05)ï¼Œ<br />
* å¼€å‘æ”¯æŒï¼šæŸ¥åˆ°çš„æ˜¯node.jsçš„expressã€PHP7.3æ”¯æŒï¼Œåº”è¯¥è¿˜æœ‰æ²¡æœåˆ°çš„
* æµè§ˆå™¨æ”¯æŒï¼šå‡ ä¸ªä¸»æµæµè§ˆå™¨ï¼Œçš„æ–°ç‰ˆæœ¬éƒ½å·²æ”¯æŒï¼Œä¸å†åˆ—ä¸¾åå­—ã€‚</p>

<p><a href="https://www.lambdatest.com/SameSite-cookie-attribute" target="_blank">Browser Compatibility Testing of 'SameSite' cookie - LambdaTest</a></p>

<h5 id="ä¸è®¾ç½®-domain-å±æ€§"><a href="#ä¸è®¾ç½®-domain-å±æ€§" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:ä¸è®¾ç½®-domain-å±æ€§" class="headings">ä¸è®¾ç½®<code>Domain</code>å±æ€§</a></h5>

<p><a href="https://stackoverflow.com/questions/12387338/what-is-a-host-only-cookie" target="_blank">Stack over flow-What is a host only cookie?</a></p>

<p>ä¹‹æ‰€ä»¥ä¸è®¾ç½®<code>Domain</code>å±æ€§ï¼Œå…¶å®æ˜¯ä¸ºäº†æ¿€æ´»<code>host-only-flag</code>ï¼Œ<br />
<strong>å½“host-only-flagè¢«è®¾ç½®ï¼Œå­åŸŸåæ— æ³•è®¿é—®æ­¤cookieã€‚</strong></p>

<p><a href="https://tools.ietf.org/html/rfc6265#section-5.3" target="_blank">rfc6265-5.3.  Storage Model</a></p>

<h3 id="3-å¯¹cookieçš„è¯¯ç”¨"><a href="#3-å¯¹cookieçš„è¯¯ç”¨" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:3-å¯¹cookieçš„è¯¯ç”¨" class="headings">3.å¯¹cookieçš„è¯¯ç”¨</a></h3>

<p>ä¸Šé¢ç®—æ˜¯è®¾è®¡é—®é¢˜ï¼Œä¸‹é¢æ˜¯å¤šæ•°æ–‡ç« ä¸»è¦è®²çš„ï¼Œå¼€å‘è€…å¯¹cookieçš„è¯¯ç”¨ã€‚</p>

<h4 id="â‘ http-æ˜æ–‡ä¼ é€’-cookie"><a href="#â‘ http-æ˜æ–‡ä¼ é€’-cookie" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:â‘ http-æ˜æ–‡ä¼ é€’-cookie" class="headings">â‘ http æ˜æ–‡ä¼ é€’ cookie</a></h4>

<p>cookieé»˜è®¤ä¸åŠ å¯†ä¼ è¾“ï¼Œå¯ä»¥åœ¨ä¼ è¾“ä¸­è¢«åå®¶ä¼™çªƒå¬æˆ–ä¿®æ”¹ã€‚</p>

<p><strong>è§£å†³ï¼šè®¾ç½®<code>Secure</code>å±æ€§&amp;cookieåŠ å¯†å’Œç­¾å</strong></p>

<p><a href="https://tools.ietf.org/html/rfc6265#section-5.2.5" target="_blank">rfc6265-5.2.5.  The Secure Attribute</a><br />
<code>Secure</code>å±æ€§ä¿è¯cookieåªåœ¨HTTPSç¯å¢ƒä¸‹å¯è¢«ä¼ è¾“ã€‚</p>

<p>å’Œæ•°æ®åº“è®¾è®¡ä¸€æ ·ï¼Œä¸ºäº†ä¿é™©ï¼Œåº”å°½é‡å‡å°‘æ•°æ®ä¸­éå¿…é¡»çš„ä¿¡æ¯é‡ã€‚<br />
cookieå€¼å¯ä»¥æ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼ˆä¼šè¯å‡­è¯ï¼‰è€Œä¸æ˜¯å…·ä½“ä¿¡æ¯ï¼Œ<br />
åœ¨ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹ï¼Œä»¥åº”å¯¹cookieçªƒå–ä¸é‡æ”¾æ”»å‡»ã€‚</p>

<blockquote>
<p>rfc6265:<br />
Servers SHOULD encrypt and sign the contents of cookies<br />
(using whatever format the server desires) when transmitting them to the<br />
user agent (even when sending the cookies over a secure channel).</p>

<p>å½“å°†æœåŠ¡å™¨ä¼ è¾“ç»™ç”¨æˆ·ä»£ç†æ—¶ï¼ŒæœåŠ¡å™¨åº”è¯¥å¯¹cookieçš„å†…å®¹è¿›è¡ŒåŠ å¯†å’Œç­¾å<br />
ï¼ˆä½¿ç”¨æœåŠ¡å™¨æ‰€éœ€çš„ä»»ä½•æ ¼å¼ï¼‰ï¼ˆå³ä½¿é€šè¿‡å®‰å…¨é€šé“å‘é€cookieï¼‰ã€‚</p>
</blockquote>

<h4 id="â‘¡cookie-é»˜è®¤å¯è¢«å®¢æˆ·ç«¯api-js-etc-è¯»å–"><a href="#â‘¡cookie-é»˜è®¤å¯è¢«å®¢æˆ·ç«¯api-js-etc-è¯»å–" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:â‘¡cookie-é»˜è®¤å¯è¢«å®¢æˆ·ç«¯api-js-etc-è¯»å–" class="headings">â‘¡cookie é»˜è®¤å¯è¢«å®¢æˆ·ç«¯API(JS etc)è¯»å–</a></h4>

<p><strong>è§£å†³ï¼šè®¾ç½®æ—¶åŠ  <code>Http-only-flag</code> ï¼Œç¦æ­¢å®¢æˆ·ç«¯JSè¯»å–cookieã€‚</strong></p>

<h4 id="â‘¢é”™è¯¯è§„åˆ’-max-age-expires"><a href="#â‘¢é”™è¯¯è§„åˆ’-max-age-expires" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:â‘¢é”™è¯¯è§„åˆ’-max-age-expires" class="headings">â‘¢é”™è¯¯è§„åˆ’<code>max-age</code>ã€<code>expires</code></a></h4>

<p><a href="https://tools.ietf.org/html/rfc6265#section-5.2" target="_blank">rfc6265-The Set-Cookie Header</a></p>

<p>æ ‡å‡†å¤ªé•¿ï¼Œç®€å•æ€»ç»“ï¼š<br />
<code>max-age</code>: ç±»ä¼¼TTLï¼Œä»¥ç§’è®¡ï¼Œåˆ°æ—¶åˆ é™¤ã€‚<br />
<code>expires</code>: GMTæ—¶é—´å­—ç¬¦ä¸²ï¼ˆWed, 09 Jun 2021 10:18:14 GMTï¼‰,åˆ°æ—¶åˆ é™¤ã€‚<br />
<code>max-age</code> æ˜¯ <code>expires</code> çš„ä¸€ä¸ªè¡¥å……æ€§å±æ€§ã€‚æ²¡æœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼Œcookieè¢«è§†ä¸º<a href="https://en.wikipedia.org/wiki/HTTP_cookie#Session_cookie" target="_blank">session cookie</a> ã€‚<br />
cookieä¿ç•™åœ¨å®¢æˆ·ç«¯çš„æ—¶é—´è¶Šé•¿ï¼Œè¢«æ”»å‡»çš„å¯èƒ½æ€§è¶Šé«˜ã€‚</p>

<h4 id="è§£å†³-è°¨æ…è®¾è®¡-max-age-expires-çš„å€¼"><a href="#è§£å†³-è°¨æ…è®¾è®¡-max-age-expires-çš„å€¼" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:è§£å†³-è°¨æ…è®¾è®¡-max-age-expires-çš„å€¼" class="headings">è§£å†³ï¼šè°¨æ…è®¾è®¡<code>max-age</code>ã€<code>expires</code>çš„å€¼</a></h4>

<p>è¶Šæ•æ„Ÿçš„æ•°æ®ï¼Œè¶Šè¦è®¾ç½®æ—¶é—´çŸ­ï¼Œä¿æŒç”¨æˆ·é¢‘ç¹è®¤è¯ã€‚</p>

<h2 id="attack-on-cookies-and-solution"><a href="#attack-on-cookies-and-solution" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:attack-on-cookies-and-solution" class="headings">Attack on cookies and solution</a></h2>

<p><strong>3.é’ˆå¯¹cookieçªƒå–çš„æ”»å‡»ä¸ç›¸åº”é˜²å¾¡</strong></p>

<p>ä»¥ä¸‹æ‰€æœ‰æ”»å‡»æ‰‹æ®µï¼Œéƒ½èƒ½å•ç‹¬æ‹‰å‡ºæ¥å†™å¥½å¤šç¯‡æŠ€æœ¯æŠ¥å‘Š|åˆ†äº«ï¼Œ<br />
å¾ˆæ˜æ˜¾æœ¬æ–‡æ²¡æœ‰è¿™ä¸ªç¯‡å¹…ï¼Œå› æ­¤æœ¬æ–‡å¾æ±‚åšåˆ°å…¨è€Œä¸è¯¦ï¼Œå¹¶é™„é“¾æ¥ä»¥ä¾›è¯¦æ±‚ã€‚</p>

<h3 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ”»å‡»-ä¿æŠ¤cookie"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ”»å‡»-ä¿æŠ¤cookie" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ”»å‡»-ä¿æŠ¤cookie" class="headings">ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ”»å‡»|ä¿æŠ¤cookieï¼Ÿ</a></h3>

<p><a href="https://odino.org/security-hardening-http-cookies/" target="_blank">è¿™ç¯‡æ–‡ç« </a> çš„ä¸€æ®µè¯è®²å¾—ä¸é”™ï¼š</p>

<blockquote>
<p>Because the data they contain is, more often than not, extremely sensitive<br />
â€” cookies are generally used to store session IDs or access tokens,<br />
an attackerâ€™s holy grail.<br />
Once they are exposed or compromised, attackers can impersonate users,<br />
or escalate their privileges on your application.</p>

<p>å› ä¸ºå®ƒä»¬åŒ…å«çš„æ•°æ®é€šå¸¸éå¸¸æ•æ„Ÿ - é€šå¸¸ç”¨äºå­˜å‚¨ä¼šè¯IDæˆ–è®¿é—®ä»¤ç‰Œï¼Œæ”»å‡»è€…çš„åœ£æ¯ã€‚<br />
ä¸€æ—¦ä»–ä»¬æš´éœ²æˆ–å—åˆ°æ”»å‡»ï¼Œæ”»å‡»è€…å°±å¯ä»¥å†’å……ç”¨æˆ·ï¼Œæˆ–è€…å‡çº§ä»–ä»¬å¯¹æ‚¨çš„åº”ç”¨ç¨‹åºçš„æƒé™ã€‚</p>
</blockquote>

<h3 id="å¸¸è§æ”»å‡»æ–¹å¼"><a href="#å¸¸è§æ”»å‡»æ–¹å¼" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:å¸¸è§æ”»å‡»æ–¹å¼" class="headings">å¸¸è§æ”»å‡»æ–¹å¼</a></h3>

<p><a href="https://en.wikipedia.org/wiki/HTTP_cookie#Cookie_theft_and_session_hijacking" target="_blank">ç»´åŸºç™¾ç§‘</a>æ€»ç»“äº†å‡ ç§å¸¸è§çš„æ”»å‡»æ–¹å¼ï¼ŒåŒ…æ‹¬æ”»å‡»è¿‡ç¨‹ç®€ä»‹ä¸é˜²å¾¡æ‰‹æ®µï¼Œåœ¨æ­¤ä¸å¤è¿°ï¼Œåªæä¾›ç›®å½•ã€‚</p>

<table>
<thead>
<tr>
<th>æ”»å‡»</th>
<th>é˜²å¾¡</th>
</tr>
</thead>

<tbody>
<tr>
<td>MITM</td>
<td>TLS&amp;<code>secure</code>attr</td>
</tr>

<tr>
<td>DNS Poisoning</td>
<td>TLS&amp;<code>secure</code>attr</td>
</tr>

<tr>
<td>DOM-Based-XSS</td>
<td><code>http-only-flag</code>&amp;<code>SameSite</code>attr</td>
</tr>

<tr>
<td>åå°„å‹XSS+æ¶æ„ä»£ç†æœåŠ¡å™¨</td>
<td><code>secure</code>attr&amp;<code>SameSite</code>attr</td>
</tr>

<tr>
<td>CSRF</td>
<td><code>SameSite</code>attr</td>
</tr>
</tbody>
</table>

<p>è¿˜æœ‰ä¸€ç±»ç»´åŸºæ²¡æåˆ°çš„ï¼Œé’ˆå¯¹<a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank">TLSåè®®</a> çš„æ”»å‡»ã€‚<br />
TLSåè®®ä¸æ˜¯å®Œå…¨å®‰å…¨çš„ï¼Œå› ä¸ºè®¾è®¡æˆ–å®ç°çš„ç¼ºé™·ï¼Œ<br />
å·²æœ‰ä¸å°‘åœ¨ç‰¹å®šæƒ…å†µä¸‹é’ˆå¯¹TLSçš„æ”»å‡»å‡ºç°ï¼Œ<br />
ä¸»è¦ç›®çš„æ˜¯ä½¿HTTPSé™ä¸ºâ€œç­‰åŒäºâ€HTTPçš„æƒ…å†µï¼ˆå³å¤åŸå¯†æ–‡ä¸ºæ˜æ–‡ï¼‰ï¼Œ<br />
è¿™ä¸æ˜¯ä¸€ä¸ªæ–°æ–¹å‘ï¼Œåˆ—ä¸¾å‡ ä¸ªæ¯”è¾ƒæœ‰åçš„æ”»å‡»æ–¹å¼ï¼š</p>

<ul>
<li><a href="https://www.contextis.com/en/blog/server-technologies-https-beast-attack" target="_blank">BEAST</a></li>
<li><a href="https://en.wikipedia.org/wiki/Lucky_Thirteen_attack" target="_blank">Lucky 13</a></li>
<li><a href="https://blog.qualys.com/ssllabs/2012/09/14/crime-information-leakage-attack-against-ssltls" target="_blank">CRIME</a></li>
<li><a href="http://breachattack.com/" target="_blank">BREACH</a></li>
</ul>

<h3 id="éå¸¸è§æ–¹å¼"><a href="#éå¸¸è§æ–¹å¼" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:éå¸¸è§æ–¹å¼" class="headings">éå¸¸è§æ–¹å¼</a></h3>

<p>éå•ä¸€çš„ã€åˆ©ç”¨çŸ¥è¯†ç»„åˆå„ç§éƒ¨åˆ†çš„é’ˆå¯¹cookieçš„æ”»å‡»æ–¹å¼ï¼Œ<br />
å¯æƒœæˆ‘åªæ‰¾åˆ°ä¸€ä¸ªã€‚</p>

<h4 id="â‘ cookiejacking-rosario-valotta-2011-05-link-https-sites-google-com-site-tentacoloviola-cookiejacking"><a href="#â‘ cookiejacking-rosario-valotta-2011-05-link-https-sites-google-com-site-tentacoloviola-cookiejacking" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:â‘ cookiejacking-rosario-valotta-2011-05-link-https-sites-google-com-site-tentacoloviola-cookiejacking" class="headings">â‘ cookiejacking-Rosario Valotta-2011-05<a href="https://sites.google.com/site/tentacoloviola/cookiejacking" target="_blank">[link]</a></a></h4>

<p>è¯¥æ–¹æ³•åˆ©ç”¨äº†IEæµè§ˆå™¨çš„â€œè·¨åŸŸäº¤äº’ç­–ç•¥â€çš„ä¸€ä¸ªæ¼æ´ï¼Œ<br />
å¤–éƒ¨HTMLçš„&lt;iframe&gt;æ ‡ç­¾å¯ä»¥åŠ è½½æœ¬åœ°cookieæ–‡ä»¶ï¼ˆæœ¬åº”ä¸èƒ½ï¼‰ã€‚<br />
æ¶æ„æœåŠ¡å™¨é€šè¿‡ä¸€ç³»åˆ—æ­£å¸¸çš„æ‰‹æ®µè·çŸ¥ç”¨äºæ„é€ cookieè·¯å¾„çš„ä¿¡æ¯ï¼Œ<br />
ç„¶åé€šè¿‡æ­¤æ¼æ´è¯»å–cookieï¼Œå¹¶åˆ©ç”¨<a href="https://www.securitysift.com/who-do-you-trust-cross-domain-content-extraction-with-clickjacking/" target="_blank">Clickjacking</a> æ‰‹æ®µä¼ è¾“cookieè‡³æœåŠ¡å™¨ã€‚<br />
å› ä¸ºè¯»çš„æ˜¯æ–‡ä»¶ï¼Œä»»ä½•cookieéƒ½ä¼šè¢«çªƒå–ã€‚</p>

<p>å¾®è½¯<a href="https://digitizor.com/cookiejacking-patch/" target="_blank">6æœˆ</a> ç»™è¿™ä¸ªæ¼æ´æ‰“äº†è¡¥ä¸ã€‚<br />
è‡³äºClickjackingï¼Œ<code>x-frame-options</code><a href="https://www.keycdn.com/blog/x-frame-options" target="_blank">(XFO)</a> å¯ä»¥é˜²æ­¢ã€‚</p>

<h2 id="academic-discussion-about-cookies"><a href="#academic-discussion-about-cookies" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:academic-discussion-about-cookies" class="headings">Academic discussion about cookies</a></h2>

<p><strong>å…³äºcookieçš„å­¦æœ¯è®¨è®º</strong></p>

<p>æœ¬æ¥æƒ³æŠŠç†è®ºæ–¹é¢ä½œä¸º2ã€3æ®µçš„æ·»å¤´ï¼Œæ²¡æƒ³åˆ°ä¸“å®¶ä»¬å·²ç»åœ¨çº¸å¤´ä¸Šæ‰“è¿‡ä¸€ä¸¤è½®æ”»é˜²äº†ã€‚<br />
æ•…å•å¼€æ­¤æ®µï¼Œç´¢å¼•å‡ ä¸ªæˆ‘è§‰å¾—æœ‰æ„æ€çš„å­¦æœ¯æ–‡çŒ®ã€‚</p>

<h3 id="cookie-masking-cookie-æ©ç›–"><a href="#cookie-masking-cookie-æ©ç›–" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:cookie-masking-cookie-æ©ç›–" class="headings">cookie masking-cookie æ©ç›–</a></h3>

<blockquote>
<p><a href="https://dl.acm.org/citation.cfm?id=2714592" target="_blank">TLS Record Protocol: Security Analysis and<br />
 Defense-in-depth Countermeasures for HTTPS</a><br />
 Author: Olivier Levillain etc<br />
 Time: 2015</p>
</blockquote>

<p>è¿™ä¸ªç ”ç©¶æ€»ç»“äº†é’ˆå¯¹TLSè®°å½•åè®®çš„5ä¸ªæ”»å‡»æ–¹å¼ï¼Œå¹¶ç»™å‡ºäº†ä¸¤ä¸ªcookieæ©ç›–æ–¹å¼ï¼š<br />
TLS Scramble &amp; MCookiesï¼Œä»¥ä¿è¯åœ¨æ„å¤–å¯¼è‡´HTTPæ˜æ–‡ä¼ è¾“çš„æƒ…å†µä¸‹ï¼Œ<br />
ç»§ç»­ä¿æŒcookieç­‰ç§˜å¯†ä¿¡æ¯æœºå¯†æ€§ã€‚</p>

<blockquote>
<p><a href="https://link.springer.com/article/10.1007%2Fs12095-018-0280-y" target="_blank">Statistical attacks on cookie masking for RC4</a><br />
Author: Kenneth G. PatersonEmail author etc<br />
Time: 2018-02</p>
</blockquote>

<p>è¯¥æ–‡éªŒè¯äº†ä¸Šç¯‡æ–‡ç« ä¸¤ç§æ©ç›–æ–¹å¼ç†è®ºä¸Šå¯è¢«åŠ å¤§æä¾›ç®—åŠ›åç ´è§£ï¼Œ<br />
å› æ­¤è¯¥æ©ç›–æ–¹å¼åªèƒ½æä¾›ä¸å¼ºçš„æœºå¯†æ€§ã€‚</p>

<h3 id="æµ‹ä¿¡é“æ”»å‡»"><a href="#æµ‹ä¿¡é“æ”»å‡»" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:æµ‹ä¿¡é“æ”»å‡»" class="headings">æµ‹ä¿¡é“æ”»å‡»</a></h3>

<blockquote>
<p><a href="https://link.springer.com/chapter/10.1007/978-3-319-89641-0_11" target="_blank">Path Leaks of HTTPS Side-Channel by Cookie Injection</a><br />
Author: Fuqing Chen etc<br />
Time: 2018-04</p>
</blockquote>

<p>è¯¥æ–‡é˜è¿°äº†ä¸€ç§æ”»å‡»æ–¹å¼å’Œä¸¤ç§åº”ç”¨æ–¹é¢ï¼š<br />
åˆ©ç”¨cookieçš„å¼±åŒæºç­–ç•¥ï¼ˆä¸Šæ–‡æœ‰æï¼‰ï¼Œå®æ–½cookieæ³¨å…¥ï¼Œ<br />
ç”¨æ³¨å…¥çš„cookieæ¥æ¨æ–­æ•æ„Ÿä¿¡æ¯ï¼Œè¿›è€Œå¤åŸä¸€éƒ¨åˆ†å¯†æ–‡ï¼ˆæ¯”å¦‚è¯·æ±‚çš„URLï¼‰ã€‚<br />
æ²¡çœ‹å®Œï¼Œå¤§æ¦‚æ˜¯åˆ©ç”¨å½“æ—¶æµè§ˆå™¨çš„cookieè·¯å¾„åŒ¹é…çš„ç®—æ³•çš„ä¸€ä¸ªç¼ºé™·ã€‚</p>

<blockquote>
<p><a href="https://link.springer.com/chapter/10.1007/978-3-662-47854-7_6" target="_blank">Protecting Encrypted Cookies from<br />
Compression Side-Channel Attacks</a><br />
Author: Janaka Alawatugoda etc<br />
Time: 2015-07</p>
</blockquote>

<p>æœ‰é‚£ä¹ˆä¸¤ç§å¯¹TLSçš„æ”»å‡»ï¼š<a href="https://blog.qualys.com/ssllabs/2012/09/14/crime-information-leakage-attack-against-ssltls" target="_blank">CRIME</a> å’Œ <a href="http://breachattack.com/" target="_blank">BREACH</a> ï¼ˆä¸Šæ–‡æœ‰æï¼‰,<br />
å®ƒä»¬åŸºäºä¼ è¾“å‰å‹ç¼©è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é¢å¤–ä¿¡æ¯é‡ï¼Œå¤ç°æ•æ„Ÿä¿¡æ¯ï¼Œ<br />
é’ˆå¯¹å®ƒä»¬çš„å¸¸è§„è§£å†³æ–¹æ³•æ˜¯ç¦æ­¢ä¼ è¾“ä¸­å‹ç¼©ï¼Œ<br />
è¿™æ„å‘³ç€åŠ å¤§ä½¿ç”¨å¸¦å®½èµ„æºã€‚<br />
è¯¥æ–‡é˜è¿°äº†ä¸¤ç§æ–°çš„å‹ç¼©æ–¹å¼ï¼Œç”¨äºå®ç°å‹ç¼©å¹¶ä¿æŠ¤æœºå¯†ä¿¡æ¯çš„åŠŸèƒ½ã€‚</p>

<h2 id="summary"><a href="#summary" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:summary" class="headings">Summary</a></h2>

<p><strong>æ€»ç»“</strong></p>

<p>é¦–å…ˆï¼Œå…³äºæ­¤æ–‡ï¼Œä¸åŒ…æ‹¬ç´ æé˜…è¯»çš„ï¼Œçº¯æœç´¢æ—¶é—´ï¼Œå¤§æ¦‚åªæœ‰2å°æ—¶å¤šï¼Œ<br />
å› æ­¤å³ä½¿æ˜¯æˆªè‡³2019-05ï¼Œæ­¤æ–‡å¤§æ¦‚è¿˜æ˜¯é—æ¼äº†è®¸å¤šå€¼å¾—ä¸€æçš„éƒ¨åˆ†ï¼Œè¯·è¯»è€…æµ·æ¶µã€‚</p>

<p>å…¶æ¬¡ï¼Œç»è¿‡ç¼–å†™æ­¤æ–‡ï¼Œä½œè€…å¯¹cookieçš„è®¤è¯†æœ‰äº†å¾ˆå¤§å˜åŒ–ï¼Œè®¤æ¸…äº†cookieèƒ½åŠ›æ˜¯å¾ˆæœ‰é™çš„ï¼Œ<br />
ä»¥åç¼–å†™webæœåŠ¡ä¹Ÿä¼šæ³¨æ„cookieçš„æ­£ç¡®è¿ç”¨ã€‚å¸Œæœ›å„ä½è¯»è€…ä¹Ÿèƒ½ä»æ­¤æ–‡ä¸­å­¦åˆ°çŸ¥è¯†ã€‚</p>
</div>

        </article>

        
            
            
            
                <ul class="post-copyright">
                    <li class="post-copyright-author">ä½œè€…ï¼š<a href="https://boholder.github.io/zh-cn/" target="_blank"> BoHolder</a></li>
                    
                        <li class="post-copyright-link">é“¾æ¥ï¼š<a href="/zh-cn/posts/cookie_security_zh/" target="_blank">https://boholder.github.io/zh-cn/posts/cookie_security_zh/</a></li>
                    
                    
                        <li class="post-copyright-license">ç‰ˆæƒï¼š<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a></li>
                    
                </ul>
            
        

        
            <div class="updated-badge-container"><div title="Updated @ 2020-07-17 21:21:03 CST" style="cursor:help;display:inline-block">

<svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2020-07-17</text><text x="915" y="140" textLength="650" transform="scale(.1)">2020-07-17</text></g></svg></div></div>
        

        
            
                <div class="post-gitinfo">
                    
                        <div class="post-gitinfo-left">
                            
                                
                                <div class="gitinfo-item commit"><a href="https://github.com/boholder/boholder.github.io/commit/0e4224bd59b835fa2c66db843ae35bcf191d2552" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="icon git-icon"><path d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>0e4224b</a></div>
                            
                            
                                
                                    
                                    <div class="gitinfo-item commit-msg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512" class="icon msg-icon"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"/></svg>Add blog "TDD-tips-zh.md", add language suffixes on article files, reduce tag.</div>
                                
                            
                        </div>
                    
                    
                        <div class="post-gitinfo-right">
                            
                                
                                    
                                    <div class="gitinfo-item feedback"><a href="https://github.com/boholder/boholder.github.io/issues" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="icon feedback-icon"><path d="M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"/></svg>Feedback</a></div>
                                
                            
                            
                        </div>
                    
                </div>
            
        

        
            
            
                <div class="related-posts">
                    <h2 class="related-title">ç›¸å…³æ–‡ç« ï¼š<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/></svg></h2>
                    <ul class="related-list">
                        
                            <li class="related-item">
                                <a href="/zh-cn/arts/program-safety-sign/" class="related-link">Safety signs for programming</a>
                            </li>
                        
                            <li class="related-item">
                                <a href="/zh-cn/posts/java_arrangement_combination_zh/" class="related-link">Javaå®ç°å¤§æ•´æ•°æ’åˆ—ç»„åˆï¼Œè§£å†³æŠ½å¡æ¬§æ°”è®¡ç®—é—®é¢˜</a>
                            </li>
                        
                            <li class="related-item">
                                <a href="/zh-cn/posts/190424-job-interview-summary-zh/" class="related-link">ä¸€æ¬¡è½¯ä»¶å¼€å‘å²—çš„é¢è¯•ç»éªŒæ€»ç»“</a>
                            </li>
                        
                    </ul>
                </div>
            
        

        
            
                <div class="post-tags">
                    
                        
                        
                            
                            <a href="/zh-cn/tags/web-security/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>web-security</a>
                        
                    
                        
                        
                            
                            <a href="/zh-cn/tags/cookie/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>cookie</a>
                        
                    
                        
                        
                            
                            <a href="/zh-cn/tags/blog/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>blog</a>
                        
                    
                </div>
            
        

        
            <footer class="minimal-footer">
                
                    
                    <div class="post-tag"><a href="/zh-cn/tags/web-security/" rel="tag" class="post-tag-link">#web-security</a>&nbsp;<a href="/zh-cn/tags/cookie/" rel="tag" class="post-tag-link">#cookie</a>&nbsp;<a href="/zh-cn/tags/blog/" rel="tag" class="post-tag-link">#blog</a></div>
                
                
                
                    
                        <div class="post-category">
                            
                                <a href="/zh-cn/categories/web-security/" class="post-category-link">web-security</a>
                        </div>
                    
                
            </footer>
        

        

        
            
                
                
            
            
            
            
                <ul class="post-nav">
                    
                        <li class="post-nav-prev">
                            <a href="/zh-cn/code/markdown-obsidian-user-defined-language-for-notepadpp2.1_zh/" rel="prev">< è‡ªåˆ¶notepad++ï¼ŒMarkDown(Obsidiané…è‰²)ç”¨æˆ·å®šä¹‰è¯­è¨€æ ¼å¼ï¼ˆè‡ªå®šä¹‰é«˜äº®ï¼‰</a>
                        </li>
                    
                    
                        <li class="post-nav-next">
                            <a href="/zh-cn/posts/190424-job-interview-summary-zh/" rel="next">ä¸€æ¬¡è½¯ä»¶å¼€å‘å²—çš„é¢è¯•ç»éªŒæ€»ç»“ ></a>
                        </li>
                    
                </ul>
            
        

        
        
    </div>
</main>

            
    <a href="#" class="back-to-top"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>

            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            
                
            
            

            
                
            
            

            
                
            
            

            <div class="site-info">Â© 2019â€“2020<svg  xmlns="http://www.w3.org/2000/svg" height="16" width="16" id="glider_svg" ><rect style="fill:#ffffff;fill-opacity:1;stroke-width:1;stroke:#999999;stroke-opacity:1" width="16" height="16" x="1" y="1"/><rect style="fill-opacity:0;stroke-width:1;stroke:#999999;stroke-opacity:1" width="5.3" height="16" x="5.6" y="1"/><rect style="fill-opacity:0;stroke-width:1;stroke:#999999;stroke-opacity:1" width="16" height="5.3" x="1" y="5.6"/><circle style="fill:#000000;fill-opacity:1;stroke-width:0;" cx="8.3" cy="3" r="2"/><circle style="fill:#000000;fill-opacity:1;stroke-width:0;" cx="13.6" cy="8.3" r="2"/><circle style="fill:#000000;fill-opacity:1;stroke-width:0;" cx="13.6" cy="13.6" r="2"/><circle style="fill:#000000;fill-opacity:1;stroke-width:0;" cx="8.3" cy="13.6" r="2"/><circle style="fill:#000000;fill-opacity:1;stroke-width:0;" cx="3" cy="13.6" r="2"/></svg> BoHolder</div>

            
                <div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank">MemE</a></div>
            

            
                <div class="site-copyright"><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a></div>
            

            
                <div class="custom-footer"><a href='http://www.gnuterrypratchett.com/index.php' target='_blank' rel='noreferrer' ><img src='/gifs/Clacks-N-Dulce-et-decorum-est-pro-hominis-vivet.gif' /></a></div>
            
        </div>
    </footer>

        </div>
    </body>
    <script src="/zh-cn/js/meme.min.js" data-no-instant></script><script data-no-instant>InstantClick.init();</script>

    
        <script data-no-instant>
            InstantClick.on('change', function () {
                const theme = localStorage.getItem('theme');
                if (theme === "dark") {
                    document.documentElement.setAttribute('data-theme', 'dark');
                    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000');
                    document.getElementById("theme-toggle").innerHTML = "ğŸŒ™";

                    var els = [].slice.apply(document.getElementsByClassName("chroma"));
                    for (var i = 0; i < els.length; i++) {
                        els[i].className = els[i].className.replace(/ *\bchroma\b/g, "chroma-dark");
                    }
                } else if (theme === "light") {
                    document.documentElement.setAttribute('data-theme', 'light');
                    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff');
                    document.getElementById("theme-toggle").innerHTML = "ğŸŒ";

                    var els = [].slice.apply(document.getElementsByClassName("chroma-dark"));
                    for (var i = 0; i < els.length; i++) {
                        els[i].className = els[i].className.replace(/ *\bchroma-dark\b/g, "chroma");
                    }
                }
            });
        </script>
    





    <script type="module" data-no-instant>
        import {Workbox} from 'https://cdn.jsdelivr.net/npm/workbox-cdn@4.3.1/workbox/workbox-window.prod.mjs';

        if ('serviceWorker' in navigator) {
            const wb = new Workbox('../../../sw.js');
            
            wb.addEventListener('activated', (event) => {
                if (event.isUpdate) {
                    appRefresh ({
                        text: 'å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬',
                        action: 'ç‚¹å‡»åˆ·æ–°',
                        callback: () => location.reload()
                    })
                }
            });

            wb.register();
        }

        async function appRefresh({text, action, callback}={}) {
            let themeColor = document.querySelector('meta[name=theme-color]');
            let dom = document.createElement('div');

            themeColor && (themeColor.content = '#000');

            dom.innerHTML = `
                <style>
                    .app-refresh {
                        background: #000;
                        height: 0;
                        line-height: 3em;
                        overflow: hidden;
                        position: fixed;
                        top: 0;
                        left: 0;
                        right: 0;
                        z-index: 42;
                        padding: 0 1em;
                        transition: all .3s ease;
                    }
                    .app-refresh-wrap {
                        display: flex;
                        color: #fff;
                    }
                    .app-refresh-wrap label {
                        flex: 1;
                    }
                    .app-refresh-show {
                        height: 3em;
                    }
                </style>
                <div class="app-refresh" id="app-refresh">
                    <div class="app-refresh-wrap" onclick="(${callback})()">
                        <label>${text}</label>
                        <span>${action}</span>
                    </div>
                </div>
            `;

            document.body.appendChild(dom);

            setTimeout(function() {
                document.getElementById('app-refresh').className += ' app-refresh-show';
            }, 16);
        }
    </script>


</html>
